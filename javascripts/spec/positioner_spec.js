((function(){describe("Positioner - fix element position during scroll",function(){var a;return a=new HtmlFactory,beforeEach(function(){return a.boxWithParent("box","parent")}),afterEach(function(){return setTimeout(function(){return a.clear()},50)}),describe("Positioner without parent element",function(){return it("should set end point to height of document if no parent element provided or not found",function(){var a;return a=new Positioner("#box","",0),expect(a.endPoint).toEqual($(document).height()),expect(a.endPoint-a.startPoint>869).toBeTruthy()})}),describe("Positioner with parent element",function(){return beforeEach(function(){return this.margin=10,this.positioner=new Positioner("#box","#parent",this.margin),this.browserWindow=new Window(this.positioner)}),afterEach(function(){return this.positioner.destroy()}),it("should set start and end points, where box will have position fixed",function(){return expect(this.positioner.endPoint-this.positioner.startPoint).toEqual(869)}),it("should pin box position when window top scroll value is in range of start/end points",function(){var a;return this.browserWindow.scrollInRange(),a=$("#box").offset().top-$(window).scrollTop(),expect(a).toEqual(this.margin+this.positioner.boxData.marginTop),expect(this.positioner.isBoxFixed).toEqual(!0)}),it("should not pin box position when window top scroll value is on edge of start point",function(){return this.browserWindow.scrollStartPoint(),expect(this.positioner.isBoxFixed).toEqual(!1)}),it("should not pin box position when window top scroll value is on edge of end point",function(){return this.browserWindow.scrollEndPoint(),expect(this.positioner.isBoxFixed).toEqual(!1)}),it("should unpin box position when window top scroll value was in range but now is above the starting point",function(){var a;return this.browserWindow.scrollInRange(),this.browserWindow.scrollAboveRange(),a=$("#box").offset().top-$(window).scrollTop(),expect(a).not.toEqual(this.margin),expect(this.positioner.isBoxFixed).toEqual(!1)}),it("should leave box at the bottom of parent when window top scroll value was in range but now is under the end point",function(){var a,b;return this.browserWindow.scrollInRange(),this.browserWindow.scrollUnderRange(),b=$("#box").offset().top-$(window).scrollTop(),a=$("#box").offset().top-$("#parent").offset().top,expect(b).not.toEqual(this.margin),expect(a).toEqual(889),expect(this.positioner.isBoxAtTheBottom).toEqual(!0)}),it("should be able to destroy itself",function(){var a;return this.browserWindow.scrollInRange(),this.positioner.destroy(),a=$("#box").offset().top-$(window).scrollTop(),expect(a).not.toEqual(this.margin),expect(this.positioner.isBoxFixed).toEqual(!1)}),it("should preserve the width of positioned box when pinned",function(){var a,b,c;return a=$("#box"),c=a.width(),this.browserWindow.scrollInRange(),b=a.width(),expect(c).toEqual(b)}),it("should preserve the width of positioned box when left at the bottom",function(){var a,b,c;return this.browserWindow.scrollInRange(),a=$("#box"),c=a.width(),this.browserWindow.scrollUnderRange(),b=a.width(),expect(c).toEqual(b)}),it("should recalculate all values after window resize",function(){var a;return this.browserWindow.scrollInRange(),this.browserWindow.resize(),a=$("#box").offset().top-$(window).scrollTop(),expect(a).toEqual(this.margin+this.positioner.boxData.marginTop),expect(this.positioner.isBoxFixed).toEqual(!0)})})})})).call(this)