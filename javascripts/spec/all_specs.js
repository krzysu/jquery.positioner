((function(){window.HtmlFactory=function(){function a(){}return a.prototype.canvas=function(){return $("#test-canvas").length===0&&this.initCanvas(),$("#test-canvas")},a.prototype.initCanvas=function(){return $("body").append("<div id='test-canvas'>")},a.prototype.clear=function(){return this.canvas().html("")},a.prototype.boxWithParent=function(a,b){var c;return c="<div id='"+b+"'style='height: 1000px; width: 1000px; padding: 10px; margin: 10px; border: 1px solid; position: relative;'>              <div id='"+a+"' style='height: 100px; width: 100px; padding: 10px; margin: 10px; border: 1px solid;'></div>            </div>",this.canvas().append(c)},a}()})).call(this),function(){window.Window=function(){function a(a){this.positioner=a,this.$win=$(window)}return a.prototype.scrollInRange=function(){var a;return a=this.positioner.startPoint+100,this.$win.scrollTop(a).trigger("scroll")},a.prototype.scrollAboveRange=function(){var a;return a=this.positioner.startPoint-100,this.$win.scrollTop(a).trigger("scroll")},a.prototype.scrollUnderRange=function(){var a;return a=this.positioner.endPoint+100,this.$win.scrollTop(a).trigger("scroll")},a.prototype.scrollStartPoint=function(){var a;return a=this.positioner.startPoint,this.$win.scrollTop(a).trigger("scroll")},a.prototype.scrollEndPoint=function(){var a;return a=this.positioner.endPoint,this.$win.scrollTop(a).trigger("scroll")},a.prototype.resize=function(){return this.$win.trigger("resize")},a}()}.call(this),function(){describe("Accountant - count distances between box and parent",function(){var a;return a=new HtmlFactory,beforeEach(function(){return a.boxWithParent("box","parent")}),afterEach(function(){return setTimeout(function(){return a.clear()},50)}),describe("Accountant without parent element",function(){return it("should set end point to height of document if no parent element provided or not found",function(){var a;return a=new Accountant("#box",""),expect(a.getEndPoint()).toEqual($(document).height()),expect(a.getEndPoint()-a.getStartPoint()>869).toBeTruthy()})}),describe("Accountant with parent element",function(){return beforeEach(function(){return this.accountant=new Accountant("#box","#parent",this.margin)}),it("should set start and end points, where box will have position fixed",function(){return expect(this.accountant.getEndPoint()-this.accountant.getStartPoint()).toEqual(869)})})})}.call(this),function(){describe("Positioner - fix element position during scroll",function(){var a;return a=new HtmlFactory,beforeEach(function(){return a.boxWithParent("box","parent")}),afterEach(function(){return setTimeout(function(){return a.clear()},50)}),describe("Positioner without parent element",function(){return it("should set end point to height of document if no parent element provided or not found",function(){var a;return a=new Positioner("#box","",0),expect(a.endPoint).toEqual($(document).height()),expect(a.endPoint-a.startPoint>869).toBeTruthy()})}),describe("Positioner with parent element",function(){return beforeEach(function(){return this.margin=10,this.positioner=new Positioner("#box","#parent",this.margin),this.browserWindow=new Window(this.positioner)}),afterEach(function(){return this.positioner.destroy()}),it("should set start and end points, where box will have position fixed",function(){return expect(this.positioner.endPoint-this.positioner.startPoint).toEqual(869)}),it("should pin box position when window top scroll value is in range of start/end points",function(){var a;return this.browserWindow.scrollInRange(),a=$("#box").offset().top-$(window).scrollTop(),expect(a).toEqual(this.margin+this.positioner.boxData.marginTop),expect(this.positioner.isBoxFixed).toEqual(!0)}),it("should not pin box position when window top scroll value is on edge of start point",function(){return this.browserWindow.scrollStartPoint(),expect(this.positioner.isBoxFixed).toEqual(!1)}),it("should not pin box position when window top scroll value is on edge of end point",function(){return this.browserWindow.scrollEndPoint(),expect(this.positioner.isBoxFixed).toEqual(!1)}),it("should unpin box position when window top scroll value was in range but now is above the starting point",function(){var a;return this.browserWindow.scrollInRange(),this.browserWindow.scrollAboveRange(),a=$("#box").offset().top-$(window).scrollTop(),expect(a).not.toEqual(this.margin),expect(this.positioner.isBoxFixed).toEqual(!1)}),it("should leave box at the bottom of parent when window top scroll value was in range but now is under the end point",function(){var a,b;return this.browserWindow.scrollInRange(),this.browserWindow.scrollUnderRange(),b=$("#box").offset().top-$(window).scrollTop(),a=$("#box").offset().top-$("#parent").offset().top,expect(b).not.toEqual(this.margin),expect(a).toEqual(889),expect(this.positioner.isBoxAtTheBottom).toEqual(!0)}),it("should be able to destroy itself",function(){var a;return this.browserWindow.scrollInRange(),this.positioner.destroy(),a=$("#box").offset().top-$(window).scrollTop(),expect(a).not.toEqual(this.margin),expect(this.positioner.isBoxFixed).toEqual(!1)}),it("should preserve the width of positioned box when pinned",function(){var a,b,c;return a=$("#box"),c=a.width(),this.browserWindow.scrollInRange(),b=a.width(),expect(c).toEqual(b)}),it("should preserve the width of positioned box when left at the bottom",function(){var a,b,c;return this.browserWindow.scrollInRange(),a=$("#box"),c=a.width(),this.browserWindow.scrollUnderRange(),b=a.width(),expect(c).toEqual(b)}),it("should recalculate all values after window resize",function(){var a;return this.browserWindow.scrollInRange(),this.browserWindow.resize(),a=$("#box").offset().top-$(window).scrollTop(),expect(a).toEqual(this.margin+this.positioner.boxData.marginTop),expect(this.positioner.isBoxFixed).toEqual(!0)})})})}.call(this),function(){}.call(this)